# CocosCreator - （未完工）

本文大概会讲一些粗浅的跟Cocos Creator有关的知识 （刚开始的构架也就一个目录而已）

推荐 https://docs.cocos.com/creator/manual/zh/ Cocos Creator 用户手册

- 界面
    - 节点
    - 组件
    - 文件管理

- 文件
    - 资源
        - 场景
        - 图集
        - 预制
        - 其他（文本、json、字体(BMFont、TTF)、粒子、声音等）
    - 脚本
        - js/ts 脚本

## 一、 界面
### 1. 节点

    节点(cc.Node)，一个可以承载多个组件的实体，必须依附于场景内。

    一个场景只能出现一个包含cc.Canvas组件的根节点，包含cc.Canvas的节点会预先固定需要展示的宽高，推荐根节点只需要Canvas就好。

    一个节点会有对应的位置(x, y, position)、大小(width, height, get/setContentSize())、锚点(anchorX, anchorY, get/setAnchorPoint())、层级(默认层级是从上到下会越来越高，可以用zIndex改变兄弟节点的层级)、skew(除非三维，否则我也看不出有啥用)等基本数据。

### 2. 组件

    组件，挂载于节点之下，可以让节点附加跟组件相关的功能，也是Cocos Creator开发的核心之一，大部分功能都是靠组件一点一点组合而成。以下介绍几个常用的基础组件：

#### 2.1. cc.Canvas

    每个场景的根组件都会有这个，跟机子适配息息相关。如果也就上上移动机，竖屏用就FIT_WIDTH，这样可以进行整体适配。该组件的节点，锚点必须是cc.v2(0.5,0.5)，没得变的。宽高可以在这个组件上指定。根据实际展示的情况指定。

#### 2.2. cc.Sprite

    只要是图，或者图集，这东西肯定少不了。使用它指定spriteFrame就可以在这个节点上展示图了。

#### 2.3. cc.Label

    文字用这个总没错。不过默认字体永远都有drawcall问题和性能问题，即便是2.0.9也并没有真正解决。如果想默认字体减少drawcall的话，还是自己丈量好高度，让一个cc.Label组件容纳的文字更多(可能就是60行以上的那种)。一般减少drawcall的利器还是用bmfont，然后让使用同样的bmfont的cc.Label按同层相邻顺序排列。如果你需要在60帧内每帧都改变cc.Label的内容的话，建议走bmfont。（也可以只用15帧改变时间，无非也就每隔几次调用触发一下罢了）

#### 2.4. cc.Graphics

    很普通的绘制组件，不过我无法在这个地方研究出高效的镂空绘制。其他的基础绘制都跟原生Canvas有着类似之处。注意坐标，web上<canvas>坐标是以左上为（0, 0）的，往右为x轴，往下为y轴；而Cocos Creator的(0, 0)点跟父节点有关，往右为x轴，往上为y轴。

    总之组件相当多，剩下的不少组件都可以去用户手册查询。

#### 2.5. 自定义组件

    自定义组件可以用js/ts开发出一个组件，然后挂载到节点上；也可以让组件挂载到预制资源(cc.Prefab)上形成可重用的组件，方便进行功能分离。

    本人使用ts开发组件，所以格式一般都是
    @Component
    export default class Comp extends cc.Component{}
    这样的，然后里面去封装一些参数进去（含有@property的属性可以被外部编辑器识别，并且可以通过编辑器传入）
    一般情况下都不需要使用任何跟组件生命周期函数有关的东西，除非特殊情况。
    比如start()做头一次展示的初始化;onload()（我并不推荐这个，因为如果你的组件在挂载节点的时候，节点还没生效，它是不会触发的，挺坑爹的）；update(dt)做帧更新 等等。（其他的我目前是用不到的，更多是自己另外写函数初始化，然后供调用者调用，以及写事件和触发事件形成事件调用）。

### 3. 文件管理



## 二、 文件

### 1. 资源

#### 1.3. 场景

    一种叫.scene的资源，每个场景都有对应的一个绑定cc.Canvas组件的根节点。游戏运行时，会通过对应的main.js（编译后的）来预加载场景并切换到默认场景。
